!function(e){e.fn.popup=function(t,o){function i(t){if(r(!0),k=m.html(),f.setcookie&&(cookieValue=l(f.cookie_name),""!=cookieValue)){if(0==f.cookie_views)return!1;if(cookieValue-=1,!(cookieValue<=0))return c(f.cookie_name,cookieValue,f.cookie_timeout),!1;c(f.cookie_name,f.cookie_views,f.cookie_timeout)}f.overlay&&(e("body").prepend('<div id="'+f.overlay_div+'"></div>'),b=e("#"+f.overlay_div),b.css({opacity:f.opacity_level}),f.overlay_cc&&b.click(function(){f.confirm_close?confirm(f.confirm_close_text)&&r():r()}),isIE=e.browser.msie&&!e.support.opacity,isIE6=isIE&&e.browser.version<7,isIE6&&e(window).bind("resize scroll",function(){b.css({width:e(window).width(),height:e(window).height(),top:e(window).scrollTop(),left:e(window).scrollLeft()})}).trigger("scroll")),e("body").prepend('<div id="'+f.popup_div+'">'+k+"</div>"),y=e("#"+f.popup_div),f.centered?(f.top=(e(window).height()-y.outerHeight())/2,f.left=(e(window).width()-y.outerWidth())/2):("string"==typeof f.left&&-1!=f.left.indexOf("%")&&(f.left_percent=f.left,f.left="100%"==f.left_percent?e(window).width()-y.outerWidth():parseInt(f.left)/100*e(window).width()),"string"==typeof f.top&&-1!=f.top.indexOf("%")&&(f.top_percent=f.top,f.top=parseInt(f.top)/100*e(window).height())),f.top=Math.round(f.top),f.left=Math.round(f.left);var o=e(window).scrollTop();if(f.fly_in&&f.floating)switch(f.fly_from){case"top-left":y.css("top",-y.outerHeight()+o+"px"),y.css("left",-y.outerWidth());break;case"top-right":y.css("top",-y.outerHeight()+o+"px"),y.css("right",-y.outerWidth());break;case"left":y.css("top",f.top+o+"px"),y.css("left",-y.outerWidth());break;case"right":y.css("top",f.top+o+"px"),y.css("right",-y.outerWidth());break;case"bottom":y.css("top",e(window).height()+e(document).scrollTop()+"px"),y.css({left:Math.round(f.left)});break;case"bottom-left":y.css("top",e(window).height()+o+"px"),y.css("left",-y.outerWidth());break;case"bottom-right":y.css("top",e(window).height()+o+"px"),y.css("right",-y.outerWidth());break;default:y.css("top",-y.outerHeight()+o+"px"),y.css({left:Math.round(f.left)})}else y.css({left:Math.round(f.left)}),y.css("top",f.top+o+"px");switch(e("#"+f.close_id).click(function(){return f.confirm_close?confirm(f.confirm_close_text)&&r():r(),!1}),f.floating&&n(),f.popup_appear){case"fadeIn":y.fadeIn(f.popup_appear_time);break;case"slideDown":y.slideDown(f.popup_appear_time);break;default:y.show(f.popup_appear_time)}e(window).resize(function(){if(f.centered?(f.top=(e(window).height()-y.outerHeight())/2,f.left=(e(window).width()-y.outerWidth())/2):(void 0!=f.left_percent&&(f.left=f.left_percent),void 0!=f.top_percent&&(f.top=f.top_percent),"string"==typeof f.left&&-1!=f.left.indexOf("%")&&(f.left="100%"==f.left_percent?e(window).width()-y.outerWidth():parseInt(f.left)/100*e(window).width()),"string"==typeof f.top&&-1!=f.top.indexOf("%")&&(f.top=parseInt(f.top)/100*e(window).height())),f.top=Math.round(f.top),f.left=Math.round(f.left),!f.floating){var t=e(window).scrollTop();y.css({top:f.top+t}),y.css({left:f.left})}}),0!=f.selfclose&&setTimeout(r,1e3*f.selfclose),f.setcookie&&c(f.cookie_name,f.cookie_views,f.cookie_timeout),e.isFunction(t)&&t.call(this)}function r(t){if(void 0!=t||0==f.fly_out)y.remove(),f.overlay&&b.remove(),f.floating&&(clearInterval(a),clearTimeout(v));else if(1==f.fly_out){switch(f.overlay&&b.remove(),f.fly_to){case"top-left":f.top=-1.5*y.outerHeight(),f.left=-1.5*y.outerWidth(),f.centered=!1;break;case"top-right":f.top=-1.5*y.outerHeight(),f.left=e(window).width()+y.outerWidth(),f.centered=!1;break;case"left":f.left=-1.5*y.outerWidth(),f.centered=!1;break;case"right":f.left=e(window).width()+y.outerWidth(),f.centered=!1;break;case"bottom":f.top=e(window).height()+y.outerHeight();break;case"bottom-left":f.top=e(window).height()+y.outerHeight(),f.left=-1.5*y.outerWidth(),f.centered=!1;break;case"bottom-right":f.top=e(window).height()+y.outerHeight(),f.left=e(window).width()+y.outerWidth(),f.centered=!1;break;default:f.top=-1.5*y.outerHeight()}setTimeout(function(){r(!0)},3e3)}}function n(){setTimeout(s,10),a=setInterval(s,f.floating_reaction)}function s(){d=Math.round(e(window).scrollTop()+f.top),u=f.centered?Math.round((e(window).width()-y.outerWidth())/2):f.left,offset=y.offset(),h=offset.top,w=offset.left,h==d&&w==u||0!=v||p()}function p(){h=Math.round((f.floating_speed*h+d)/(f.floating_speed+1)),previous_position_left=w,w=Math.round((f.floating_speed*w+u)/(f.floating_speed+1)),h!=_||w!=g?(y.css("top",Math.round(h)+"px"),y.css("left",Math.round(w)+"px"),v=setTimeout(p,20),_=h,g=w):h!=d||w!=u?(_=h,g=w,h>d?h-=1:d>h&&(h+=1),w>u?w-=1:u>w&&(w+=1),v=setTimeout(p,20)):(_=h=d,g=w=u,y.css("top",Math.round(d)+"px"),y.css("left",Math.round(u)+"px"),v=0)}function c(e,t,o){if("0"==o)var i=null;else var i=o;jQuery.cookie(e,t,{expires:i,path:"/"})}function l(e){return null==jQuery.cookie(e)?"":jQuery.cookie(e)}var f={starttime:0,selfclose:0,popup_div:"popup",overlay_div:"overlay",close_id:"baner_close",overlay:!1,opacity_level:.7,overlay_cc:!0,centered:!0,top:130,left:200,setcookie:!1,cookie_name:"popup",cookie_timeout:0,cookie_views:0,floating:!0,floating_reaction:700,floating_speed:12,fly_in:!0,fly_from:"top",fly_out:!1,fly_to:"bottom",popup_appear:"show",popup_appear_time:"",confirm_close:!1,confirm_close_text:"Do you really want to close?"};t&&e.extend(f,t);var a,d,u,h,w,_,g,m,v=0,k="",y=e("#"+f.popup_div),b=e("#"+f.overlay_div);return this.each(function(){m=e(this),e(this).hide()}),0==f.starttime?setTimeout(function(){i(o)},250):setTimeout(function(){i(o)},1e3*f.starttime),this}}(jQuery);